# Configuration des routes LOCALES (mon.essensys.fr)
# Traefik gère le frontend local (sans authentification)
# Les API sont gérées par Nginx directement (port 80) pour compatibilité client legacy
# Le dashboard est accessible via insecure: true (pas besoin de route)

http:
  routers:
    # Frontend local (sans authentification)
    frontend-local:
      rule: "Host(`mon.essensys.fr`)"
      entryPoints:
        - web
      service: frontend-service
      priority: 10

  services:
    # Service frontend (proxy vers nginx qui sert les fichiers statiques)
    # Nginx écoute sur port 9090 en interne pour servir le frontend
    frontend-service:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1:9090"
        passHostHeader: true

